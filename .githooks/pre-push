#!/usr/bin/env bash
set -euo pipefail

if ! command -v uv >/dev/null 2>&1; then
  echo "uv is required. Install with: brew install uv" >&2
  exit 1
fi

if [[ ! -d .venv ]]; then
  echo "Missing .venv. Run: uv sync --group dev" >&2
  exit 1
fi

export UV_CACHE_DIR="${UV_CACHE_DIR:-.uv-cache}"

uv run ruff check .
uv run ruff format --check .
uv run pytest
